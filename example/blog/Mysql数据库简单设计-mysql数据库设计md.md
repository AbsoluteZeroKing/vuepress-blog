---
title: Mysql数据库简单设计
date: 2021-01-18 23:40:27.0
updated: 2021-02-15 23:48:20.53
url: https://leesdog.space/archives/mysql数据库设计md
summary: 这一篇博客主要想总结一下关于具体项目数据库设计过程中我会遇到的问题与知识点，所以我会具体根据一个简单项目来完整的将数据库设计流程走一遍，同时做知识点总结
categories: 
tags:
- Mysql
- 数据库
- powerDesigner
---

# Mysql数据库简单设计

[TOC]

## 1.摘要

这一篇博客主要想总结一下关于具体项目数据库设计过程中我会遇到的问题与知识点，所以我会具体根据一个简单项目来完整的将数据库设计流程走一遍，同时做知识点总结



## 2.正文

### 2.1项目分析

拿到一个项目首先对项目进行具体的分析，我的演示项目如下图所示：

![img](http://image.leesdog.space/dbset1.jpg)

其中还给了一份关于三级指标示例：

![image-20210201191325149](http://image.leesdog.space/dbset2.png)

所以我们首先对该项目的数据进行分析

很明显其表结构属于那种**目录树**的结构，即一层一层往下递归的关系，这类数据库其实有不少设计方式，可以参见博客[1][1]、[2][2]，这里为了简便就直接使用简单表的设计方式，根据指标来分类分成**三个表**，即一级表，二级表，三级表；根据角色我们需要创建一个**用户表**用以存放账户

接下来涉及表的字段设计，设计字段前先回顾一下Mysql数据库数据类型：

### 知识点：Mysql数据库数据类型

**数值类型**

|       类型       |                   大小                   |                        范围（有符号）                        |                        范围（无符号）                        |      用途       |
| :--------------: | :--------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :-------------: |
|   **TINYINT**    |                  1 byte                  |                         (-128，127)                          |                           (0，255)                           |    小整数值     |
|   **SMALLINT**   |                 2 bytes                  |                      (-32 768，32 767)                       |                         (0，65 535)                          |    大整数值     |
|  **MEDIUMINT**   |                 3 bytes                  |                   (-8 388 608，8 388 607)                    |                       (0，16 777 215)                        |    大整数值     |
| **INT或INTEGER** |                 4 bytes                  |               (-2 147 483 648，2 147 483 647)                |                      (0，4 294 967 295)                      |    大整数值     |
|    **BIGINT**    |                 8 bytes                  |   (-9,223,372,036,854,775,808，9 223 372 036 854 775 807)    |               (0，18 446 744 073 709 551 615)                |   极大整数值    |
|    **FLOAT**     |                 4 bytes                  | (-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38) |         0，(1.175 494 351 E-38，3.402 823 466 E+38)          | 单精度 浮点数值 |
|    **DOUBLE**    |                 8 bytes                  | (-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308) | 0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308) | 双精度 浮点数值 |
|   **DECIMAL**    | 对DECIMAL(M,D) ，如果M>D，为M+2否则为D+2 |                        依赖于M和D的值                        |                        依赖于M和D的值                        |     小数值      |

**日期和时间类型**

|     类型      | 大小 ( bytes) |                             范围                             |        格式         |           用途           |
| :-----------: | :-----------: | :----------------------------------------------------------: | :-----------------: | :----------------------: |
|   **DATE**    |       3       |                    1000-01-01/9999-12-31                     |     YYYY-MM-DD      |          日期值          |
|   **TIME**    |       3       |                   '-838:59:59'/'838:59:59'                   |      HH:MM:SS       |     时间值或持续时间     |
|   **YEAR**    |       1       |                          1901/2155                           |        YYYY         |          年份值          |
| **DATETIME**  |       8       |           1000-01-01 00:00:00/9999-12-31 23:59:59            | YYYY-MM-DD HH:MM:SS |     混合日期和时间值     |
| **TIMESTAMP** |       4       | 1970-01-01 00:00:00/2038结束时间是第 **2147483647** 秒，北京时间 **2038-1-19 11:14:07**，格林尼治时间 2038年1月19日 凌晨 03:14:07 |   YYYYMMDD HHMMSS   | 混合日期和时间值，时间戳 |

**字符串类型：**

|      类型      |         大小          |              用途               |
| :------------: | :-------------------: | :-----------------------------: |
|    **CHAR**    |      0-255 bytes      |           定长字符串            |
|  **VARCHAR**   |     0-65535 bytes     |           变长字符串            |
|  **TINYBLOB**  |      0-255 bytes      | 不超过 255 个字符的二进制字符串 |
|  **TINYTEXT**  |      0-255 bytes      |          短文本字符串           |
|    **BLOB**    |    0-65 535 bytes     |     二进制形式的长文本数据      |
|    **TEXT**    |    0-65 535 bytes     |           长文本数据            |
| **MEDIUMBLOB** |  0-16 777 215 bytes   |  二进制形式的中等长度文本数据   |
| **MEDIUMTEXT** |  0-16 777 215 bytes   |        中等长度文本数据         |
|  **LONGBLOB**  | 0-4 294 967 295 bytes |    二进制形式的极大文本数据     |
|  **LONGTEXT**  | 0-4 294 967 295 bytes |          极大文本数据           |

> MySQL 5.0 以上的版本：
>
> 1、一个汉字占多少长度与编码有关：
>
> **UTF－8**：一个汉字＝3个字节
>
> **GBK**：一个汉字＝2个字节
>
> 2、varchar(n) 表示 n 个字符，无论汉字和英文，Mysql 都能存入 n 个字符，仅是实际字节长度有所区别
>
> 3、MySQL 检查长度，可用 SQL 语言来查看：
>
> ```
> select LENGTH(fieldname) from tablename
> ```



### 2.2数据库具体设计与初始化

首先使用powerDesigner设计数据库，新建一个PysicalDiagram设计如下图table

![image-20210201214306641](http://image.leesdog.space/dbset7.png)



设计好以后选择数据库-生成数据库即可

然后打开Navicat连接上自己的数据库，创建IMSystem数据库用以该项目；

连接上数据库后右键选择运行SQL文件，如下图选择对应文件：

![image-20210201213608321](http://image.leesdog.space/dbset5.png)

运行完成后表就创好了：

![image-20210201214411753](http://image.leesdog.space/dbset8.png)

然后我们可以选择先初始化一些数据信息，这里选择使用excel进行初始化：

![image-20210201215213768](http://image.leesdog.space/dbset9.png)

然后在navicat里对user表运行导入向导，选择xlsx，然后根据提示走就可以了，最终结果：

![image-20210201215322612](http://image.leesdog.space/dbset10.png)

同理其实可以将三级指标也加入其中





[1]: https://www.cnblogs.com/kissdodog/p/3297894.html	"单纯树递归关系数据数据库设计"
[2]: https://blog.csdn.net/monkey_d_meng/article/details/6647488	"树形结构的数据库表Schema设计"
